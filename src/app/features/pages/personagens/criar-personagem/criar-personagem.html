<div class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-8 px-4">
  <div class="max-w-5xl mx-auto">
    <div class="mb-8">
      <button 
        pButton 
        icon="pi pi-arrow-left" 
        label="Voltar" 
        class="mb-4 bg-slate-700 hover:bg-slate-600 border-none"
        (click)="cancelar()">
      </button>
      
      <h1 class="text-4xl font-bold text-white mb-2">Criar Personagem</h1>
      <p class="text-slate-400">Defina as características do seu herói</p>
    </div>
    <form [formGroup]="personagemForm" (ngSubmit)="onSubmit()">
      
      <p-card styleClass="bg-slate-800 border border-slate-700 mb-6">
        <ng-template pTemplate="header">
          <div class="p-6 pb-0">
            <h2 class="text-2xl font-bold text-white">Informações Básicas</h2>
          </div>
        </ng-template>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="flex flex-col">
            <label for="nome" class="text-slate-300 mb-2 font-semibold">
              Nome do Personagem *
            </label>
            <input 
              pInputText 
              id="nome" 
              formControlName="nome"
              placeholder="Ex: Aragorn"
              [class.ng-invalid]="isInvalid('nome')"
              class="bg-slate-900 text-white border-slate-600" />
            <small *ngIf="isInvalid('nome')" class="text-red-400 mt-1">
              Nome deve ter entre 3 e 50 caracteres
            </small>
          </div>

          <div class="flex flex-col">
            <label for="raca" class="text-slate-300 mb-2 font-semibold">
              Raça *
            </label>
            <p-select 
              id="raca"
              formControlName="raca"
              [options]="racas"
              placeholder="Selecione uma raça"
              optionLabel="label"
              optionValue="value"
              [class.ng-invalid]="isInvalid('raca')"
              styleClass="w-full bg-slate-900 text-white border-slate-600" />
            <small *ngIf="isInvalid('raca')" class="text-red-400 mt-1">
              Selecione uma raça
            </small>
          </div>

          <div class="flex flex-col md:col-span-2">
            <label for="classe" class="text-slate-300 mb-2 font-semibold">
              Classe *
            </label>
            <p-select 
              id="classe"
              formControlName="classe"
              [options]="classes"
              placeholder="Selecione uma classe"
              optionLabel="label"
              optionValue="value"
              [class.ng-invalid]="isInvalid('classe')"
              styleClass="w-full bg-slate-900 text-white border-slate-600" />
            <small *ngIf="isInvalid('classe')" class="text-red-400 mt-1">
              Selecione uma classe
            </small>
          </div>

          <div class="flex flex-col md:col-span-2">
            <label for="descricao" class="text-slate-300 mb-2 font-semibold">
              Descrição / História *
            </label>
            <textarea 
              pInputTextarea 
              id="descricao" 
              formControlName="descricao"
              rows="4"
              placeholder="Conte a história do seu personagem..."
              [class.ng-invalid]="isInvalid('descricao')"
              class="bg-slate-900 text-white border-slate-600">
            </textarea>
            <small *ngIf="isInvalid('descricao')" class="text-red-400 mt-1">
              Descrição deve ter entre 10 e 500 caracteres
            </small>
          </div>
        </div>
      </p-card>

      <p-card styleClass="bg-slate-800 border border-slate-700 mb-6">
        <ng-template pTemplate="header">
          <div class="p-6 pb-0 flex justify-between items-center">
            <div>
              <h2 class="text-2xl font-bold text-white">Atributos</h2>
              <p class="text-slate-400 text-sm mt-1">
                Distribua 27 pontos entre os atributos (valor: 1-20)
              </p>
            </div>
            <div class="text-right">
              <div class="text-sm text-slate-400">Pontos Disponíveis</div>
              <div class="text-3xl font-bold" 
                   [class.text-orange-400]="pontosDisponiveis() > 0"
                   [class.text-green-400]="pontosDisponiveis() === 0"
                   [class.text-red-400]="pontosDisponiveis() < 0">
                {{ pontosDisponiveis() }}
              </div>
            </div>
          </div>
        </ng-template>

        <div class="mb-4">
          <button 
            type="button"
            pButton 
            label="Distribuir Aleatoriamente" 
            icon="pi pi-refresh"
            class="bg-purple-600 hover:bg-purple-700 border-none"
            (click)="distribuirAleatoriamente()">
          </button>
        </div>

        <p-divider styleClass="border-slate-700"></p-divider>

        <div formGroupName="atributos" class="space-y-6">
          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-red-400 font-bold text-lg">
                <i class="pi pi-bolt mr-2"></i>Força
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.forca')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('forca')"
                (click)="diminuirAtributo('forca')">
              </button>
              <p-slider 
                formControlName="forca"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('forca')"
                (click)="aumentarAtributo('forca')">
              </button>
            </div>
          </div>

          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-green-400 font-bold text-lg">
                <i class="pi pi-directions mr-2"></i>Destreza
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.destreza')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('destreza')"
                (click)="diminuirAtributo('destreza')">
              </button>
              <p-slider 
                formControlName="destreza"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('destreza')"
                (click)="aumentarAtributo('destreza')">
              </button>
            </div>
          </div>

          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-yellow-400 font-bold text-lg">
                <i class="pi pi-shield mr-2"></i>Constituição
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.constituicao')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('constituicao')"
                (click)="diminuirAtributo('constituicao')">
              </button>
              <p-slider 
                formControlName="constituicao"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('constituicao')"
                (click)="aumentarAtributo('constituicao')">
              </button>
            </div>
          </div>

          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-blue-400 font-bold text-lg">
                <i class="pi pi-book mr-2"></i>Inteligência
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.inteligencia')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('inteligencia')"
                (click)="diminuirAtributo('inteligencia')">
              </button>
              <p-slider 
                formControlName="inteligencia"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('inteligencia')"
                (click)="aumentarAtributo('inteligencia')">
              </button>
            </div>
          </div>

          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-purple-400 font-bold text-lg">
                <i class="pi pi-eye mr-2"></i>Sabedoria
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.sabedoria')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('sabedoria')"
                (click)="diminuirAtributo('sabedoria')">
              </button>
              <p-slider 
                formControlName="sabedoria"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('sabedoria')"
                (click)="aumentarAtributo('sabedoria')">
              </button>
            </div>
          </div>

          <div class="flex flex-col">
            <div class="flex justify-between items-center mb-3">
              <label class="text-pink-400 font-bold text-lg">
                <i class="pi pi-star mr-2"></i>Carisma
              </label>
              <div class="flex items-center gap-3">
                <span class="text-white text-2xl font-bold">
                  {{ personagemForm.get('atributos.carisma')?.value }}
                </span>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <button 
                type="button"
                pButton 
                icon="pi pi-minus"
                class="p-button-sm bg-slate-700 hover:bg-slate-600 border-none"
                [disabled]="!podeDiminuirAtributo('carisma')"
                (click)="diminuirAtributo('carisma')">
              </button>
              <p-slider 
                formControlName="carisma"
                [min]="1" 
                [max]="20"
                [step]="1"
                styleClass="flex-1"
                class="w-full">
              </p-slider>
              <button 
                type="button"
                pButton 
                icon="pi pi-plus"
                class="p-button-sm bg-orange-500 hover:bg-orange-600 border-none"
                [disabled]="!podeAumentarAtributo('carisma')"
                (click)="aumentarAtributo('carisma')">
              </button>
            </div>
          </div>
        </div>
      </p-card>

      <div class="flex gap-4 justify-end">
        <button 
          type="button"
          pButton 
          label="Cancelar" 
          icon="pi pi-times"
          class="bg-slate-700 hover:bg-slate-600 border-none"
          (click)="cancelar()">
        </button>
        
        <button 
          type="submit"
          pButton 
          label="Criar Personagem" 
          icon="pi pi-check"
          class="bg-orange-500 hover:bg-orange-600 border-none"
          [disabled]="isSubmitting() || pontosDisponiveis() !== 0">
        </button>
      </div>
    </form>
  </div>
</div>