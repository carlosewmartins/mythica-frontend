<div class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-8 px-4">
  <div class="max-w-6xl mx-auto">
    <div *ngIf="isLoading()" class="flex justify-center items-center py-20">
      <i class="pi pi-spin pi-spinner text-orange-500 text-6xl"></i>
    </div>
    <div *ngIf="!isLoading() && personagem()">
      <div class="mb-8">
        <button 
          pButton 
          icon="pi pi-arrow-left" 
          label="Voltar" 
          class="mb-4 bg-slate-700 hover:bg-slate-600 border-none"
          (click)="voltarParaLista()">
        </button>
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
          <div>
            <h1 class="text-4xl font-bold text-white mb-2">{{ personagem()!.nome }}</h1>
            <div class="flex items-center gap-3">
              <i [class]="'pi ' + getRacaIcon(personagem()!.raca) + ' text-orange-400 text-xl'"></i>
              <span class="text-slate-300 text-lg">{{ personagem()!.raca }}</span>
              <span class="text-slate-500">•</span>
              <p-tag 
                [value]="personagem()!.classe" 
                [severity]="getClasseColor(personagem()!.classe)"
                styleClass="uppercase">
              </p-tag>
            </div>
          </div>
          <div class="flex gap-3 self-start md:self-center">
            <button 
              pButton 
              label="Iniciar Campanha" 
              icon="pi pi-play"
              class="bg-orange-500 hover:bg-orange-600 border-none"
              (click)="iniciarCampanha()"
              [disabled]="personagem()!.status.vida_atual <= 0">
            </button>
            <button 
              pButton 
              icon="pi pi-trash"
              class="bg-red-600 hover:bg-red-700 border-none"
              pTooltip="Deletar Personagem"
              tooltipPosition="top"
              (click)="confirmarDelecao($event)">
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="personagem()!.status.vida_atual <= 0"
           class="bg-red-900/50 border border-red-700 text-red-300 rounded-lg p-4 mb-6 flex items-center gap-4">
        <i class="pi pi-bolt text-2xl"></i>
        <div>
          <h4 class="font-bold">Este Personagem Morreu</h4>
          <p>Sua jornada chegou ao fim e ele não pode mais iniciar novas campanhas.</p>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-1 space-y-6 fade-animation">
          <p-card styleClass="bg-slate-800 border border-slate-700">
            <ng-template pTemplate="header">
              <div class="p-6 pb-0">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                  <i class="pi pi-heart text-red-400"></i>
                  Status
                </h2>
              </div>
            </ng-template>
            <div class="space-y-4">
              <div class="bg-slate-900/50 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-slate-400 text-sm">Nível</span>
                  <span class="text-white text-2xl font-bold">{{ personagem()!.status.nivel }}</span>
                </div>
              </div>
              <div class="bg-slate-900/50 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-slate-400 text-sm">Vida</span>
                  <span class="text-white font-bold">
                    {{ personagem()!.status.vida_atual }} / {{ personagem()!.status.vida_maxima }}
                  </span>
                </div>
                <p-progressBar 
                  [value]="getPorcentagemVida()" 
                  [showValue]="false"
                  [style]="{'height': '8px', 'background': '#1e293b'}">
                </p-progressBar>
              </div>
              <div class="bg-slate-900/50 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-slate-400 text-sm">Experiência</span>
                  <span class="text-white font-bold">{{ personagem()!.status.experiencia }} XP</span>
                </div>
              </div>
            </div>
          </p-card>
          <p-card styleClass="bg-slate-800 border border-slate-700">
            <ng-template pTemplate="header">
              <div class="p-6 pb-0">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                  <i class="pi pi-shopping-bag text-orange-400"></i>
                  Inventário
                </h2>
              </div>
            </ng-template>
            <div *ngIf="personagem()!.status.inventario.length > 0" class="space-y-2">
              <div 
                *ngFor="let item of personagem()!.status.inventario" 
                class="bg-slate-900/50 rounded-lg p-3 flex items-center gap-3">
                <i class="pi pi-box text-slate-400"></i>
                <span class="text-white">{{ item }}</span>
              </div>
            </div>
            <div *ngIf="personagem()!.status.inventario.length === 0" 
                 class="text-center py-8">
              <i class="pi pi-inbox text-slate-600 text-4xl mb-3"></i>
              <p class="text-slate-500">Inventário vazio</p>
            </div>
          </p-card>
        </div>
        <div class="lg:col-span-2 fade-animation">
          <p-card styleClass="bg-slate-800 border border-slate-700">
            <ng-template pTemplate="header">
              <div class="p-6 pb-0">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                  <i class="pi pi-book text-blue-400"></i>
                  História
                </h2>
              </div>
            </ng-template>
            <p class="text-slate-300 text-lg leading-relaxed whitespace-pre-wrap">
              {{ personagem()!.descricao }}
            </p>
          </p-card>
          <p-card styleClass="bg-slate-800 border border-slate-700">
            <ng-template pTemplate="header">
              <div class="p-6 pb-0">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                  <i class="pi pi-chart-bar text-purple-400"></i>
                  Atributos
                </h2>
              </div>
            </ng-template>

            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
              <div class="bg-gradient-to-br from-red-500/10 to-red-500/5 border border-red-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-bolt text-red-400"></i>
                  <span class="text-red-400 font-bold text-sm uppercase">Força</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.forca }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-green-500/10 to-green-500/5 border border-green-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-directions text-green-400"></i>
                  <span class="text-green-400 font-bold text-sm uppercase">Destreza</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.destreza }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-yellow-500/10 to-yellow-500/5 border border-yellow-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-shield text-yellow-400"></i>
                  <span class="text-yellow-400 font-bold text-sm uppercase">Constituição</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.constituicao }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-blue-500/10 to-blue-500/5 border border-blue-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-book text-blue-400"></i>
                  <span class="text-blue-400 font-bold text-sm uppercase">Inteligência</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.inteligencia }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-purple-500/10 to-purple-500/5 border border-purple-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-eye text-purple-400"></i>
                  <span class="text-purple-400 font-bold text-sm uppercase">Sabedoria</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.sabedoria }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-pink-500/10 to-pink-500/5 border border-pink-500/20 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-star text-pink-400"></i>
                  <span class="text-pink-400 font-bold text-sm uppercase">Carisma</span>
                </div>
                <div class="text-white text-3xl font-bold">
                  {{ personagem()!.atributos.carisma }}
                </div>
              </div>
            </div>
          </p-card>
          <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-4">
            <div class="flex items-center gap-2 text-slate-400 text-sm">
              <i class="pi pi-calendar"></i>
              <span>Criado em: {{ personagem()!.criado_em | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<p-confirmDialog></p-confirmDialog>